<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Learn Python Generators | Evgeny Roskach's blog</title><meta name=keywords content="python,decorators,programming,tutorial,prime numbers,sql"><meta name=description content="Originally posted on 2020-04-02
There are already many very helpful tutorials on the subject out there. In this piece I wanted to share my own take and experience with python generators that I have gathered while working on production-level Python code. Introduction Whether you are familiar with Python generators or you have only heard a thing or two about them, allow me to summarise the 2 main properties of generator functions:"><meta name=author content="Evgeny Roskach"><link rel=canonical href=https://genyrosk.github.io/posts/python-generators/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://genyrosk.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://genyrosk.github.io/favicon16x16.png><link rel=icon type=image/png sizes=32x32 href=https://genyrosk.github.io/favicon32x32.png><link rel=apple-touch-icon href=https://genyrosk.github.io/apple_touch_icon.png><link rel=mask-icon href=https://genyrosk.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Learn Python Generators"><meta property="og:description" content="Originally posted on 2020-04-02
There are already many very helpful tutorials on the subject out there. In this piece I wanted to share my own take and experience with python generators that I have gathered while working on production-level Python code. Introduction Whether you are familiar with Python generators or you have only heard a thing or two about them, allow me to summarise the 2 main properties of generator functions:"><meta property="og:type" content="article"><meta property="og:url" content="https://genyrosk.github.io/posts/python-generators/"><meta property="og:image" content="https://avatars.githubusercontent.com/u/9571838?v4"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-05T22:09:50+09:00"><meta property="article:modified_time" content="2023-03-05T22:09:50+09:00"><meta property="og:site_name" content="genyrosk's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://avatars.githubusercontent.com/u/9571838?v4"><meta name=twitter:title content="Learn Python Generators"><meta name=twitter:description content="Originally posted on 2020-04-02
There are already many very helpful tutorials on the subject out there. In this piece I wanted to share my own take and experience with python generators that I have gathered while working on production-level Python code. Introduction Whether you are familiar with Python generators or you have only heard a thing or two about them, allow me to summarise the 2 main properties of generator functions:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://genyrosk.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Learn Python Generators","item":"https://genyrosk.github.io/posts/python-generators/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Learn Python Generators","name":"Learn Python Generators","description":"Originally posted on 2020-04-02\nThere are already many very helpful tutorials on the subject out there. In this piece I wanted to share my own take and experience with python generators that I have gathered while working on production-level Python code. Introduction Whether you are familiar with Python generators or you have only heard a thing or two about them, allow me to summarise the 2 main properties of generator functions:","keywords":["python","decorators","programming","tutorial","prime numbers","sql"],"articleBody":"Originally posted on 2020-04-02\nThere are already many very helpful tutorials on the subject out there. In this piece I wanted to share my own take and experience with python generators that I have gathered while working on production-level Python code. Introduction Whether you are familiar with Python generators or you have only heard a thing or two about them, allow me to summarise the 2 main properties of generator functions:\ngenerators are stateful functions. generators delay computations until necessary. As you are about to see, these properties make generators incredibly useful.\nGenerator functions vs generator instances Let’s take a look at a simple example:\ndef generator_func(): a = 0 yield a a = 10 yield a \u003e\u003e\u003e generator_inst = generator_func() Notice how we’re using the special yield statement instead of the typical return. This is done on purpose: generator_func is a generator function while generator_inst is a generator instance, the “true” generator if you prefer.\nThe purpose of a generator function is to build the generator instance, while the generator instance is the actual object that is going to run the specified code. This is because, as we will see more in detail later, generators are stateful. Thus we need to initialize an instance of this generator in its initial state, that will change everytime we make call it.\nWe can trace an analogy with Python classes: everything starts with the class definition, which describes how different parts of it work together, and when called returns an instance of itself that holds all the inner methods and variables. In short, class definitions are meant to define and build, while class instances are meant to be built and executed.\nAs you might have inferred based on this analogy, a generator instance, just like a class instance, is not a value. A generator instance is a mapped computation object that sits in a certain memory address (unlike functions). We can check it like so:\n\u003e\u003e\u003e generator_func \u003cfunction __main__.generator_func()\u003e \u003e\u003e\u003e generator_instance \u003cgenerator object generator at 0x1111401a8\u003e Notice how the generator instance is an object located in the 0x1111401a8 memory address.\nFrom now on we’ll refer to the generator instance simply as a generator. Albeit, don’t be suprised if the term ‘generator’ is used to refer to the generator function as well.\nRetrieve values from generators using yield/next At this point, you might be thinking:\n“Wait… but if inspecting the generator returns this address that stores the computation, how do I access the value that it’s supposed to return?” This is where the yield/next pair truly kicks in.\nyield is a statment, i.e. a syntactic expression, that specifies the value that a generator returns, or, more precisely, the value that the generator yields, while next is a special Python function that summons the generator’s inner code to execute until it encounters a yield statment, at which point it simply returns (yields) the specified value.\nThe reason why the generator yields instead of returning, is because a function return implies that the function has finished executing, that there’s nothing left for that function to do. A generator can yield as many values as a programmer desires. In fact, as we’ll see later, you can make a generator yield values indefinetely. When the return expression is used in a generator, the generator exits and computation is finished.\nFollowing our class analogy, you can think of next as a class method.\nLet’s look at our example again:\ndef generator_func(): a = 0 yield a a = 10 yield a generator_inst = generator_func() Let’s pass the generator instance to the special next function.\n\u003e\u003e\u003e next(generator_inst) 0 Awesome! We got a value out of our generator! So what just happened?\nThe generator started on line 1, and assigned 0 to the variable a. Then it executed the yield a statement and yielded the value of a.\n“So… is this it then?” Well, the generator is now paused: it stopped at the yield statement, and is waiting for us to call it again to resume its computation. So let’s do just that:\n\u003e\u003e\u003e next(generator_inst) 10 We got the new value of a out! Let’s try one more time:\n\u003e\u003e\u003e next(generator_inst) --------------------------------------------------------------------------- StopIteration Traceback (most recent call last) \u003cipython-input-5-50ee8ff2a4f6\u003e in \u003cmodule\u003e ----\u003e 1 next(generator_inst) StopIteration: Oh oh, something wrong must have happened there… But this is actually the expected behaviour: once the Python interpreter understand that there’s not more code to be executed inside of a generator, it will promptly raise a special exception called StopIteration. In fact, the exact same thing will happen if we add a return statement at the end:\ndef generator_func(): a = 0 yield a a = 10 yield a return generator_inst = generator_func() next(generator_inst) # yields 0 next(generator_inst) # yields 10 next(generator_inst) # StopIteration is raised 0 10 --------------------------------------------------------------------------- StopIteration Traceback (most recent call last) in ----\u003e 1 next(generator_inst) StopIteration: You might be shaking your head and wondering why has it been designed this way. Can’t the generator signal that it finished in some other way? Well, not really, not in Python at least.\nBut this exception is actually very useful, it can be easily captured and will thus prevent unnecessary computation.\nYou can of course watch out for the exception explcitely:\ngenerator_inst = generator_func() while true: try: value = next(generator_inst) print(value) except StopIteration: break print('done') 0 10 done But the Python way would be do it in a for loop. Why? Because in additionto calling next on the generator for you, Python for loops automatically check for the StopIteration exception for you and will exit the loop context as soon as this exception is raised.\nfor value in generator_func(): # you can call the function immediately print(value) print('done') 0 10 done Much, much, much neater.\nGenerators are stateful This means that in between calls, a generator is capable of storing state. Think of state as a variable or a collection of variables that holds values. A generator is thus capable of returning values that depend on that state.\nLet us illustrate it with another generator function where we have a stateful variable a:\ndef generator_func(): a = 0 while a \u003c 5: a += 1 yield a g = generator_func() for value in g: print(value) 1 2 3 4 5 Everytime the generator is called, it executes all the lines of code until it reaches a yield statement. During this execution, the value of a changes and is then yielded back to us.\nThis functionality can be very useful if we need the output of the generator to depend on a previous state.\nPass values back to the generator We have seen how to get values form a generator, but we are yet to see how we can pass values back to the generator.\nYes, you heard that right. In addition to yielding a continuous stream of output values, generators can also accept a continuous stream of input values, which they can then use to compute the next output (they are stateful after all).\nTo pass a value back to the generator, use the .send(value) method on the generator instance.\nLet’s see how this works with an example:\ndef my_generator(): a = yield print('a:', a) a = yield print('a:', a) yield g = my_generator() next(g) g.send(1) g.send(2) a: 1 a: 2 You might be wondering why we are calling the next function in the beggining. It’s due to the order in which the yield statement executes its actions:\nit first returns the value that it’s yielding and pauses it then assigns the value that it’s passed with .send(value) and the generator continues running until it encounters the next yield statement So can you retrieve and send values at the same time? Of course! In the following example we will print the stateful variables inside of the generator to better understand what’s going on:\ndef my_generator(): a = 2 print('1) state -\u003e a:', a) b = yield a print('2) state -\u003e a:', a, ', b:', b) b = yield a * b print('3) state -\u003e a:', a, ', b:', b) yield a * b print('4) state -\u003e a:', a, ', b:', b) g = my_generator() print('yield:', next(), '\\n') print('yield:', g.send(10), '\\n') print('yield:', g.send(200), '\\n') print('yield:', next(g), '\\n') 1) state -\u003e a: 2 yield: 2 2) state -\u003e a: 2 , b: 10 yield: 20 3) state -\u003e a: 2 , b: 200 yield: 400 4) state -\u003e a: 2 , b: 1000 --------------------------------------------------------------------------- StopIteration Traceback (most recent call last) in 16 print('yield:', gen.send(10), '\\n') 17 print('yield:', gen.send(100), '\\n') ---\u003e 18 print('yield:', gen.send(1000), '\\n') 19 print('yield:', next(gen), '\\n') StopIteration: Note how the last call will raise a StopIteration exception. Remember: The exception is raised when the generator reaches the end of its code and there are no more yield statements left to execute.\nGenerators delay computations until necessary A prime numbers generator A more eloquent way of putting it would be to say that that generators map an input value to a computation as opposed to what classic functions do, which is mapping an input value to an output value. The computation is delayed until the value of that computation is explicitely requested. This paradigm is commonly referred to as lazy evaluation.\nSuppose you want to calculate all prime numbers up to a certain max integer. Normally you would have to calculate them all at once, wait for it to finish, and then proceed with the next thing you want to do with them.\nWith the help of generators, you can retrieve the values as they are being computed. You could say you are subscribing to the stream the stream of prime numbers. This is a very powerful idea, since it allows us to do something with the values we already have without having to wait for the entire computation to finish.\nLet’s start with a function that calculates whether a number is prime:\ndef is_prime(num): for i in range(2, int(num**0.5) + 1): if num % i == 0: return False return True Now let’s write up the generator:\ndef generate_primes(max_num): for num in range(2, max_num): if is_prime(num): yield num And iterate over its values:\nfor value in generate_primes(50): print(value) 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 Animate a plot as prime numbers are being generated Let’s try something a bit more fancy. As the prime numbers are being computed, we plot them in polar coordinates on a graph. The prime number’s value p will be both the distance from the origin r and the angle θ (in radians). The cartesian coordinates are thus $(p \\ cos(p), p \\ sin(p))$, ie $e^{i\\pi}=-1$.\nimport math import time import matplotlib.animation as animation import matplotlib.pyplot as plt import numpy as np from matplotlib import style def is_prime(num): for i in range(2, int(num**0.5) + 1): if num % i == 0: return False return True def generate_primes(max_num): for num in range(2, max_num): if is_prime(num): yield num def polar_to_cartesian(r, theta): x = r * math.cos(theta) y = r * math.sin(theta) return x, y style.use('fivethirtyeight') fig = plt.figure() ax1 = fig.add_subplot(1,1,1) N_MAX = 2500 g = generate_primes(N_MAX) xs = [] ys = [] def animate(i): try: value = next(g) except StopIteration: return x, y = polar_to_cartesian(value, value) xs.append(x) ys.append(y) ax1.clear() ax1.scatter(xs, ys, s=5) ax1.set_xlim([-N_MAX, N_MAX]) ax1.set_ylim([-N_MAX, N_MAX]) fig.suptitle('Prime numbers in polar coordinates', fontsize=12) plt.xticks(fontsize=12) plt.yticks(fontsize=12) anim = animation.FuncAnimation(fig, animate, interval=5) plt.show() Which should generate the following plot:\nPrime Numbers Spiral Do you notice how the prime number form these spirals from the origin? This plot illustrates, as Grant from 3blue1brown has put it:\nHow pretty but pointless patterns in polar plots of primes prompt pretty important ponderings on properties of those primes.\nDefinitely checkout his video on this to learn more (100% worth it).\nInfinite streams One of the most useful things you can do with generators is creating inifite streams of values. One real example that I have encountered was when I was writing a SQL query with a lot of conditional WHERE clauses. The first condition needs to start with a WHERE, while all the following ones need to be preceded with AND.\nSELECT * FROM table WHERE condition1 AND condition2 The problem we had was that we didn’t know if any condition was going to be applied at all. Luckily, a simple generator came to the rescue:\ndef where_generator(): yield 'WHERE' while True: yield 'AND' where = where_generator() for _ in range(4): print(next(where)) WHERE AND AND AND And that’s it!\nIf you want to go to the next level of Pythonista, try using the itertools library provided out of the box by Python.\nfrom itertools import chain, repeat where = chain(['WHERE'], repeat('AND')) for _ in range(4): print(next(where)) WHERE AND AND AND Thank you for reading!\n","wordCount":"2119","inLanguage":"en","datePublished":"2023-03-05T22:09:50+09:00","dateModified":"2023-03-05T22:09:50+09:00","author":{"@type":"Person","name":"Evgeny Roskach"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://genyrosk.github.io/posts/python-generators/"},"publisher":{"@type":"Organization","name":"Evgeny Roskach's blog","logo":{"@type":"ImageObject","url":"https://genyrosk.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://genyrosk.github.io/ accesskey=h title="Ev's stdout (Alt + H)"><img src=https://avatars.githubusercontent.com/u/9571838?v4 alt aria-label=logo height=35>Ev's stdout</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://genyrosk.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://genyrosk.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Learn Python Generators</h1><div class=post-meta><span title='2023-03-05 22:09:50 +0900 +0900'>March 5, 2023</span>&nbsp;·&nbsp;10 min&nbsp;·&nbsp;Evgeny Roskach&nbsp;|&nbsp;<a href=https://github.com/genyrosk/genyrosk.github.io/tree/main/content//posts/python-generators/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#introduction>Introduction</a></li><li><a href=#generator-functions-vs-generator-instances>Generator functions vs generator instances</a></li><li><a href=#retrieve-values-from-generators-using-yieldnext>Retrieve values from generators using <code>yield</code>/<code>next</code></a><ul><li><a href=#_wait-but-if-inspecting-the-generator-returns-this-address-that-stores-the-computation-how-do-i-access-the-value-that-its-supposed-to-return_><em>&ldquo;Wait&mldr; but if inspecting the generator returns this address that stores the computation, how do I access the value that it&rsquo;s supposed to return?&rdquo;</em></a></li><li><a href=#_so-is-this-it-then_><em>&ldquo;So&mldr; is this it then?&rdquo;</em></a></li></ul></li><li><a href=#generators-are-stateful>Generators are stateful</a></li><li><a href=#pass-values-back-to-the-generator>Pass values back to the generator</a></li><li><a href=#generators-delay-computations-until-necessary>Generators delay computations until necessary</a><ul><li><a href=#a-prime-numbers-generator>A prime numbers generator</a></li><li><a href=#animate-a-plot-as-prime-numbers-are-being-generated>Animate a plot as prime numbers are being generated</a></li></ul></li><li><a href=#infinite-streams>Infinite streams</a></li></ul></nav></div></details></div><div class=post-content><p><em>Originally posted on 2020-04-02</em></p><h4 id=__there-are-already-many-very-helpful-tutorials-on-the-subject-out-there-in-this-piece-i-wanted-to-share-my-own-take-and-experience-with-python-generators-that-i-have-gathered-while-working-on-production-level-python-code__><strong><em>There are already many very helpful tutorials on the subject out there. In this piece I wanted to share my own take and experience with python generators that I have gathered while working on production-level Python code.</em></strong><a hidden class=anchor aria-hidden=true href=#__there-are-already-many-very-helpful-tutorials-on-the-subject-out-there-in-this-piece-i-wanted-to-share-my-own-take-and-experience-with-python-generators-that-i-have-gathered-while-working-on-production-level-python-code__>#</a></h4><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Whether you are familiar with Python generators or you have only heard a thing or two about them, allow me to summarise the 2 main properties of generator functions:</p><ul><li>generators are <strong>stateful</strong> functions.</li><li>generators <strong>delay computations until necessary</strong>.</li></ul><p>As you are about to see, these properties make generators incredibly useful.</p><h2 id=generator-functions-vs-generator-instances>Generator functions vs generator instances<a hidden class=anchor aria-hidden=true href=#generator-functions-vs-generator-instances>#</a></h2><p>Let&rsquo;s take a look at a simple example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>generator_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>generator_inst</span> <span class=o>=</span> <span class=n>generator_func</span><span class=p>()</span>
</span></span></code></pre></div><p>Notice how we&rsquo;re using the special <code>yield</code> statement instead of the typical <code>return</code>. This is done on purpose: <code>generator_func</code> is a <strong>generator function</strong> while <code>generator_inst</code> is a <strong>generator instance</strong>, the &ldquo;true&rdquo; generator if you prefer.</p><p>The purpose of a generator function is to build the generator instance, while the generator instance is the actual object that is going to run the specified code. This is because, as we will see more in detail later, <strong>generators are stateful</strong>. Thus we need to initialize an instance of this generator in its initial state, that will change everytime we make call it.</p><p>We can trace an analogy with Python classes: everything starts with the class definition, which describes how different parts of it work together, and when called returns an instance of itself that holds all the inner methods and variables. In short, class definitions are meant to define and build, while class instances are meant to be built and executed.</p><p>As you might have inferred based on this analogy, a generator instance, just like a class instance, is not a value. A generator instance is a <strong>mapped computation</strong> object that sits in a certain memory address (unlike functions). We can check it like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>generator_func</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>function</span> <span class=n>__main__</span><span class=o>.</span><span class=n>generator_func</span><span class=p>()</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>generator_instance</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>generator</span> <span class=nb>object</span> <span class=n>generator</span> <span class=n>at</span> <span class=mh>0x1111401a8</span><span class=o>&gt;</span>
</span></span></code></pre></div><p>Notice how the generator instance is an object located in the <code>0x1111401a8</code> memory address.</p><p>From now on we&rsquo;ll refer to the generator instance simply as a <em>generator</em>. Albeit, don&rsquo;t be suprised if the term &lsquo;generator&rsquo; is used to refer to the generator function as well.</p><h2 id=retrieve-values-from-generators-using-yieldnext>Retrieve values from generators using <code>yield</code>/<code>next</code><a hidden class=anchor aria-hidden=true href=#retrieve-values-from-generators-using-yieldnext>#</a></h2><p>At this point, you might be thinking:</p><h3 id=_wait-but-if-inspecting-the-generator-returns-this-address-that-stores-the-computation-how-do-i-access-the-value-that-its-supposed-to-return_><em>&ldquo;Wait&mldr; but if inspecting the generator returns this address that stores the computation, how do I access the value that it&rsquo;s supposed to return?&rdquo;</em><a hidden class=anchor aria-hidden=true href=#_wait-but-if-inspecting-the-generator-returns-this-address-that-stores-the-computation-how-do-i-access-the-value-that-its-supposed-to-return_>#</a></h3><p>This is where the <code>yield</code>/<code>next</code> pair truly kicks in.</p><p><code>yield</code> is a statment, i.e. a syntactic expression, that specifies the value that a generator returns, or, more precisely, the value that the generator <strong>yields</strong>, while <code>next</code> is a special Python function that summons the generator&rsquo;s inner code to execute until it encounters a <code>yield</code> statment, at which point it simply returns (yields) the specified value.</p><p>The reason why the generator <em>yields</em> instead of <em>returning</em>, is because a function return implies that the function has finished executing, that there&rsquo;s nothing left for that function to do. A generator can <em>yield</em> as many values as a programmer desires. In fact, as we&rsquo;ll see later, you can make a generator <em>yield</em> values indefinetely. When the <code>return</code> expression is used in a generator, the generator exits and computation is finished.</p><p>Following our class analogy, you can think of <code>next</code> as a class method.</p><p>Let&rsquo;s look at our example again:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>generator_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>generator_inst</span> <span class=o>=</span> <span class=n>generator_func</span><span class=p>()</span>
</span></span></code></pre></div><p>Let&rsquo;s pass the generator instance to the special <code>next</code> function.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>0</span>
</span></span></code></pre></div><p>Awesome! We got a value out of our generator! So what just happened?</p><p>The generator started on line 1, and assigned <code>0</code> to the variable <code>a</code>. Then it executed the <code>yield a</code> statement and yielded the value of <code>a</code>.</p><h3 id=_so-is-this-it-then_><em>&ldquo;So&mldr; is this it then?&rdquo;</em><a hidden class=anchor aria-hidden=true href=#_so-is-this-it-then_>#</a></h3><p>Well, the generator is now <strong>paused</strong>: it stopped at the yield statement, and is waiting for us to call it again to resume its computation. So let&rsquo;s do just that:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=mi>10</span>
</span></span></code></pre></div><p>We got the new value of <code>a</code> out! Let&rsquo;s try one more time:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>---------------------------------------------------------------------------</span>
</span></span><span class=line><span class=cl><span class=ne>StopIteration</span>                             <span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>ipython</span><span class=o>-</span><span class=nb>input</span><span class=o>-</span><span class=mi>5</span><span class=o>-</span><span class=mi>50</span><span class=n>ee8ff2a4f6</span><span class=o>&gt;</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>----&gt;</span> <span class=mi>1</span> <span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=ne>StopIteration</span><span class=p>:</span>
</span></span></code></pre></div><p>Oh oh, something wrong must have happened there&mldr; But this is actually the expected behaviour: once the Python interpreter understand that there&rsquo;s not more code to be executed inside of a generator, it will promptly raise a special exception called <code>StopIteration</code>. In fact, the exact same thing will happen if we add a <code>return</code> statement at the end:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>generator_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>generator_inst</span> <span class=o>=</span> <span class=n>generator_func</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span> <span class=c1># yields 0</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span> <span class=c1># yields 10</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span> <span class=c1># StopIteration is raised</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=m>10</span>
</span></span><span class=line><span class=cl>---------------------------------------------------------------------------
</span></span><span class=line><span class=cl>StopIteration                             Traceback <span class=o>(</span>most recent call last<span class=o>)</span>
</span></span><span class=line><span class=cl>&lt;ipython-input-5-50ee8ff2a4f6&gt; in &lt;module&gt;
</span></span><span class=line><span class=cl>----&gt; <span class=m>1</span> next<span class=o>(</span>generator_inst<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>StopIteration:
</span></span></code></pre></div><p>You might be shaking your head and wondering why has it been designed this way. Can&rsquo;t the generator signal that it finished in some other way? Well, not really, not in Python at least.</p><p>But this exception is actually very useful, it can be easily captured and will thus prevent unnecessary computation.</p><p>You can of course watch out for the exception explcitely:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>generator_inst</span> <span class=o>=</span> <span class=n>generator_func</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=n>true</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=n>generator_inst</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>StopIteration</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;done&#39;</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=m>10</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>But the Python way would be do it in a for loop. Why? Because in additionto calling <code>next</code> on the generator for you, Python <code>for</code> loops automatically check for the <code>StopIteration</code> exception for you and will exit the loop context as soon as this exception is raised.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>generator_func</span><span class=p>():</span> <span class=c1># you can call the function immediately</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;done&#39;</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=m>10</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span></code></pre></div><p>Much, much, much neater.</p><h2 id=generators-are-stateful>Generators are stateful<a hidden class=anchor aria-hidden=true href=#generators-are-stateful>#</a></h2><p>This means that in between calls, a generator is capable of storing state. Think of state as a variable or a collection of variables that holds values. A generator is thus capable of returning values that depend on that state.</p><p>Let us illustrate it with another generator function where we have a stateful variable <code>a</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>generator_func</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>a</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>a</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=n>g</span> <span class=o>=</span> <span class=n>generator_func</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>g</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=m>5</span>
</span></span></code></pre></div><p>Everytime the generator is called, it executes all the lines of code until it reaches a <code>yield</code> statement. During this execution, the value of <code>a</code> changes and is then yielded back to us.</p><p>This functionality can be very useful if we need the output of the generator to depend on a previous state.</p><h2 id=pass-values-back-to-the-generator>Pass values back to the generator<a hidden class=anchor aria-hidden=true href=#pass-values-back-to-the-generator>#</a></h2><p>We have seen how to get values form a generator, but we are yet to see how we can <strong>pass values back to the generator</strong>.</p><p>Yes, you heard that right. In addition to yielding a continuous stream of output values, generators can also accept a continuous stream of input values, which they can then use to compute the next output (they are stateful after all).</p><p>To pass a value back to the generator, use the <code>.send(value)</code> method on the generator instance.</p><p>Let&rsquo;s see how this works with an example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>my_generator</span><span class=p>():</span> 
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=k>yield</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;a:&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=k>yield</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;a:&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl><span class=n>g</span> <span class=o>=</span> <span class=n>my_generator</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>next</span><span class=p>(</span><span class=n>g</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>g</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>g</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>a: <span class=m>1</span>
</span></span><span class=line><span class=cl>a: <span class=m>2</span>
</span></span></code></pre></div><p>You might be wondering why we are calling the <code>next</code> function in the beggining. It&rsquo;s due to the order in which the <code>yield</code> statement executes its actions:</p><ul><li>it first returns the value that it&rsquo;s yielding and <strong>pauses</strong></li><li>it then assigns the value that it&rsquo;s passed with <code>.send(value)</code> and the generator continues running until it encounters the next <code>yield</code> statement</li></ul><p>So can you retrieve and send values at the same time? Of course! In the following example we will print the stateful variables inside of the generator to better understand what&rsquo;s going on:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>my_generator</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>a</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;1) state -&gt;  a:&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=k>yield</span> <span class=n>a</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;2) state -&gt;  a:&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=s1>&#39;, b:&#39;</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>b</span> <span class=o>=</span> <span class=k>yield</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;3) state -&gt;  a:&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=s1>&#39;, b:&#39;</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;4) state -&gt;  a:&#39;</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=s1>&#39;, b:&#39;</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>g</span> <span class=o>=</span> <span class=n>my_generator</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;yield:&#39;</span><span class=p>,</span> <span class=nb>next</span><span class=p>(),</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;yield:&#39;</span><span class=p>,</span> <span class=n>g</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;yield:&#39;</span><span class=p>,</span> <span class=n>g</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=mi>200</span><span class=p>),</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;yield:&#39;</span><span class=p>,</span> <span class=nb>next</span><span class=p>(</span><span class=n>g</span><span class=p>),</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>1<span class=o>)</span> state -&gt;  a: <span class=m>2</span>
</span></span><span class=line><span class=cl>yield: <span class=m>2</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2<span class=o>)</span> state -&gt;  a: <span class=m>2</span> , b: <span class=m>10</span>
</span></span><span class=line><span class=cl>yield: <span class=m>20</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>3<span class=o>)</span> state -&gt;  a: <span class=m>2</span> , b: <span class=m>200</span>
</span></span><span class=line><span class=cl>yield: <span class=m>400</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>4<span class=o>)</span> state -&gt;  a: <span class=m>2</span> , b: <span class=m>1000</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>---------------------------------------------------------------------------
</span></span><span class=line><span class=cl>StopIteration                             Traceback <span class=o>(</span>most recent call last<span class=o>)</span>
</span></span><span class=line><span class=cl>&lt;ipython-input-59-96abd9b795ea&gt; in &lt;module&gt;
</span></span><span class=line><span class=cl>     <span class=m>16</span> print<span class=o>(</span><span class=s1>&#39;yield:&#39;</span>, gen.send<span class=o>(</span>10<span class=o>)</span>, <span class=s1>&#39;\n&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>     <span class=m>17</span> print<span class=o>(</span><span class=s1>&#39;yield:&#39;</span>, gen.send<span class=o>(</span>100<span class=o>)</span>, <span class=s1>&#39;\n&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>---&gt; <span class=m>18</span> print<span class=o>(</span><span class=s1>&#39;yield:&#39;</span>, gen.send<span class=o>(</span>1000<span class=o>)</span>, <span class=s1>&#39;\n&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>     <span class=m>19</span> print<span class=o>(</span><span class=s1>&#39;yield:&#39;</span>, next<span class=o>(</span>gen<span class=o>)</span>, <span class=s1>&#39;\n&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>StopIteration:
</span></span></code></pre></div><p>Note how the last call will raise a <code>StopIteration</code> exception. Remember: The exception is raised when the generator reaches the end of its code and there are no more <code>yield</code> statements left to execute.</p><h2 id=generators-delay-computations-until-necessary>Generators delay computations until necessary<a hidden class=anchor aria-hidden=true href=#generators-delay-computations-until-necessary>#</a></h2><h3 id=a-prime-numbers-generator>A prime numbers generator<a hidden class=anchor aria-hidden=true href=#a-prime-numbers-generator>#</a></h3><p>A more eloquent way of putting it would be to say that that generators <strong>map an input value to a computation</strong> as opposed to what classic functions do, which is mapping an input value to an output value. The computation is delayed until the value of that computation is explicitely requested. This paradigm is commonly referred to as <strong>lazy evaluation</strong>.</p><p>Suppose you want to calculate all prime numbers up to a certain max integer. Normally you would have to calculate them all at once, wait for it to finish, and then proceed with the next thing you want to do with them.</p><p>With the help of generators, you can retrieve the values as they are being computed. You could say you are <em>subscribing</em> to the stream the stream of prime numbers. This is a very powerful idea, since it allows us to do something with the values we already have without having to wait for the entire computation to finish.</p><p>Let&rsquo;s start with a function that calculates whether a number is prime:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>is_prime</span><span class=p>(</span><span class=n>num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>num</span><span class=o>**</span><span class=mf>0.5</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>num</span> <span class=o>%</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>True</span>
</span></span></code></pre></div><p>Now let&rsquo;s write up the generator:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>generate_primes</span><span class=p>(</span><span class=n>max_num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>num</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>max_num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>is_prime</span><span class=p>(</span><span class=n>num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>num</span>
</span></span></code></pre></div><p>And iterate over its values:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>for</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>generate_primes</span><span class=p>(</span><span class=mi>50</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=m>5</span>
</span></span><span class=line><span class=cl><span class=m>7</span>
</span></span><span class=line><span class=cl><span class=m>11</span>
</span></span><span class=line><span class=cl><span class=m>13</span>
</span></span><span class=line><span class=cl><span class=m>17</span>
</span></span><span class=line><span class=cl><span class=m>19</span>
</span></span><span class=line><span class=cl><span class=m>23</span>
</span></span><span class=line><span class=cl><span class=m>29</span>
</span></span><span class=line><span class=cl><span class=m>31</span>
</span></span><span class=line><span class=cl><span class=m>37</span>
</span></span><span class=line><span class=cl><span class=m>41</span>
</span></span><span class=line><span class=cl><span class=m>43</span>
</span></span><span class=line><span class=cl><span class=m>47</span>
</span></span></code></pre></div><h3 id=animate-a-plot-as-prime-numbers-are-being-generated>Animate a plot as prime numbers are being generated<a hidden class=anchor aria-hidden=true href=#animate-a-plot-as-prime-numbers-are-being-generated>#</a></h3><p>Let&rsquo;s try something a bit more fancy. As the prime numbers are being computed, we plot them in polar coordinates on a graph. The prime number&rsquo;s value <strong>p</strong> will be both the distance from the origin <strong>r</strong> and the angle <strong>θ</strong> (in radians). The cartesian coordinates are thus $(p \ cos(p), p \ sin(p))$, ie $e^{i\pi}=-1$.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>math</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.animation</span> <span class=k>as</span> <span class=nn>animation</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>matplotlib.pyplot</span> <span class=k>as</span> <span class=nn>plt</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>matplotlib</span> <span class=kn>import</span> <span class=n>style</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>is_prime</span><span class=p>(</span><span class=n>num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=nb>int</span><span class=p>(</span><span class=n>num</span><span class=o>**</span><span class=mf>0.5</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>num</span> <span class=o>%</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>generate_primes</span><span class=p>(</span><span class=n>max_num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>num</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=n>max_num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>is_prime</span><span class=p>(</span><span class=n>num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>num</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>polar_to_cartesian</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=n>theta</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span> <span class=o>=</span> <span class=n>r</span> <span class=o>*</span> <span class=n>math</span><span class=o>.</span><span class=n>cos</span><span class=p>(</span><span class=n>theta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>y</span> <span class=o>=</span> <span class=n>r</span> <span class=o>*</span> <span class=n>math</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>theta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>style</span><span class=o>.</span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;fivethirtyeight&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>fig</span> <span class=o>=</span> <span class=n>plt</span><span class=o>.</span><span class=n>figure</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>ax1</span> <span class=o>=</span> <span class=n>fig</span><span class=o>.</span><span class=n>add_subplot</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>N_MAX</span> <span class=o>=</span> <span class=mi>2500</span>
</span></span><span class=line><span class=cl><span class=n>g</span> <span class=o>=</span> <span class=n>generate_primes</span><span class=p>(</span><span class=n>N_MAX</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>xs</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>ys</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>animate</span><span class=p>(</span><span class=n>i</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>value</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=n>g</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>StopIteration</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>    <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>polar_to_cartesian</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>xs</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ys</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>y</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ax1</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>ax1</span><span class=o>.</span><span class=n>scatter</span><span class=p>(</span><span class=n>xs</span><span class=p>,</span> <span class=n>ys</span><span class=p>,</span> <span class=n>s</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ax1</span><span class=o>.</span><span class=n>set_xlim</span><span class=p>([</span><span class=o>-</span><span class=n>N_MAX</span><span class=p>,</span> <span class=n>N_MAX</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=n>ax1</span><span class=o>.</span><span class=n>set_ylim</span><span class=p>([</span><span class=o>-</span><span class=n>N_MAX</span><span class=p>,</span> <span class=n>N_MAX</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>fig</span><span class=o>.</span><span class=n>suptitle</span><span class=p>(</span><span class=s1>&#39;Prime numbers in polar coordinates&#39;</span><span class=p>,</span> <span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>plt</span><span class=o>.</span><span class=n>xticks</span><span class=p>(</span><span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>plt</span><span class=o>.</span><span class=n>yticks</span><span class=p>(</span><span class=n>fontsize</span><span class=o>=</span><span class=mi>12</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>anim</span> <span class=o>=</span> <span class=n>animation</span><span class=o>.</span><span class=n>FuncAnimation</span><span class=p>(</span><span class=n>fig</span><span class=p>,</span> <span class=n>animate</span><span class=p>,</span> <span class=n>interval</span><span class=o>=</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>plt</span><span class=o>.</span><span class=n>show</span><span class=p>()</span>
</span></span></code></pre></div><p>Which should generate the following plot:</p><figure><img loading=lazy src=images/prime_numbers_spiral_2.gif width=100%><figcaption>Prime Numbers Spiral</figcaption></figure><p>Do you notice how the prime number form these spirals from the origin? This plot illustrates, as Grant from <a href=https://www.youtube.com/channel/UCYO_jab_esuFRV4b17AJtAw/featured>3blue1brown</a> has put it:</p><blockquote><p>How pretty but pointless patterns in polar plots of primes prompt pretty important ponderings on properties of those primes.</p></blockquote><p>Definitely checkout his <a href="https://www.youtube.com/watch?v=EK32jo7i5LQ&amp;t=1s">video</a> on this to learn more (100% worth it).</p><h2 id=infinite-streams>Infinite streams<a hidden class=anchor aria-hidden=true href=#infinite-streams>#</a></h2><p>One of the most useful things you can do with generators is creating inifite streams of values. One real example that I have encountered was when I was writing a SQL query with a lot of conditional <code>WHERE</code> clauses. The first condition needs to start with a <code>WHERE</code>, while all the following ones need to be preceded with <code>AND</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=k>table</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=n>condition1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>AND</span><span class=w> </span><span class=n>condition2</span><span class=w>
</span></span></span></code></pre></div><p>The problem we had was that we didn&rsquo;t know if any condition was going to be applied at all. Luckily, a simple generator came to the rescue:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>where_generator</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>yield</span> <span class=s1>&#39;WHERE&#39;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>yield</span> <span class=s1>&#39;AND&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>where</span> <span class=o>=</span> <span class=n>where_generator</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>where</span><span class=p>))</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>WHERE
</span></span><span class=line><span class=cl>AND
</span></span><span class=line><span class=cl>AND
</span></span><span class=line><span class=cl>AND
</span></span></code></pre></div><p>And that&rsquo;s it!</p><p>If you want to go to the next level of Pythonista, try using the <code>itertools</code> library provided out of the box by Python.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>itertools</span> <span class=kn>import</span> <span class=n>chain</span><span class=p>,</span> <span class=n>repeat</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>where</span> <span class=o>=</span> <span class=n>chain</span><span class=p>([</span><span class=s1>&#39;WHERE&#39;</span><span class=p>],</span> <span class=n>repeat</span><span class=p>(</span><span class=s1>&#39;AND&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=nb>next</span><span class=p>(</span><span class=n>where</span><span class=p>))</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>WHERE
</span></span><span class=line><span class=cl>AND
</span></span><span class=line><span class=cl>AND
</span></span><span class=line><span class=cl>AND
</span></span></code></pre></div><p>Thank you for reading!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://genyrosk.github.io/tags/python/>python</a></li><li><a href=https://genyrosk.github.io/tags/decorators/>decorators</a></li><li><a href=https://genyrosk.github.io/tags/programming/>programming</a></li><li><a href=https://genyrosk.github.io/tags/tutorial/>tutorial</a></li><li><a href=https://genyrosk.github.io/tags/prime-numbers/>prime numbers</a></li><li><a href=https://genyrosk.github.io/tags/sql/>sql</a></li></ul><nav class=paginav><a class=prev href=https://genyrosk.github.io/posts/python-decorators/><span class=title>« Prev</span><br><span>Learn Python Decorators</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Learn Python Generators on twitter" href="https://twitter.com/intent/tweet/?text=Learn%20Python%20Generators&amp;url=https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f&amp;hashtags=python%2cdecorators%2cprogramming%2ctutorial%2cprimenumbers%2csql"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Learn Python Generators on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f&amp;title=Learn%20Python%20Generators&amp;summary=Learn%20Python%20Generators&amp;source=https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Learn Python Generators on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f&title=Learn%20Python%20Generators"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Learn Python Generators on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Learn Python Generators on whatsapp" href="https://api.whatsapp.com/send?text=Learn%20Python%20Generators%20-%20https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Learn Python Generators on telegram" href="https://telegram.me/share/url?text=Learn%20Python%20Generators&amp;url=https%3a%2f%2fgenyrosk.github.io%2fposts%2fpython-generators%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://genyrosk.github.io/>Evgeny Roskach's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>